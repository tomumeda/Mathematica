(************** Content-type: application/mathematica **************
                     CreatedBy='Mathematica 5.2'

                    Mathematica-Compatible Notebook

This notebook can be used with any Mathematica-compatible
application, such as Mathematica, MathReader or Publicon. The data
for the notebook starts with the line containing stars above.

To get the notebook into a Mathematica-compatible application, do
one of the following:

* Save the data starting with the line of stars above into a file
  with a name ending in .nb, then open the file inside the
  application;

* Copy the data starting with the line of stars above to the
  clipboard, then use the Paste menu command inside the application.

Data for notebooks contains only printable 7-bit ASCII and can be
sent directly in email or through ftp in text mode.  Newlines can be
CR, LF or CRLF (Unix, Macintosh or MS-DOS style).

NOTE: If you modify the data for this notebook not in a Mathematica-
compatible application, you must delete the line below containing
the word CacheID, otherwise Mathematica-compatible applications may
try to use invalid cache data.

For more information on notebooks and Mathematica-compatible 
applications, contact Wolfram Research:
  web: http://www.wolfram.com
  email: info@wolfram.com
  phone: +1-217-398-0700 (U.S.)

Notebook reader applications are available free of charge from 
Wolfram Research.
*******************************************************************)

(*CacheID: 232*)


(*NotebookFileLineBreakTest
NotebookFileLineBreakTest*)
(*NotebookOptionsPosition[     42080,       1229]*)
(*NotebookOutlinePosition[     43104,       1265]*)
(*  CellTagsIndexPosition[     43028,       1259]*)
(*WindowFrame->Normal*)



Notebook[{

Cell[CellGroupData[{
Cell["UpDownSwap", "ObjectName",
  CellTags->"Function?"],

Cell[TextData[{
  "\[FilledSmallSquare] ",
  Cell[BoxData[
      RowBox[{
        RowBox[{
          StyleBox["UpDownSwap",
            "MR"], 
          StyleBox["[",
            "MR"], 
          StyleBox["dummy",
            "TI"], 
          StyleBox["]",
            "MR"]}], 
        StyleBox["[",
          "MR"], 
        StyleBox["term",
          "TI"], 
        StyleBox["]",
          "MR"]}]]],
  " will swap the up and down positions of the dummy index in a term \
consisting of simple Tensor products."
}], "Usage",
  CellTags->"Function?"],

Cell[" The dummy index must contain the flavor.", "MathCaption"],

Cell[TextData[{
  " ",
  Cell[BoxData[
      \(UpDownSwap\)]],
  " is automatically mapped onto arrays, equations and sums."
}], "MathCaption"],

Cell[TextData[{
  "See also: ",
  ButtonBox["IndexChange",
    ButtonData:>{"IndexChange"},
    ButtonStyle->"AddOnsLink"],
  ", ",
  ButtonBox["DummySimplify",
    ButtonData:>{"DummySimplify"},
    ButtonStyle->"AddOnsLink"],
  ", ",
  ButtonBox["SimplifyTensorSum",
    ButtonData:>{"SimplifyTensorSum"},
    ButtonStyle->"AddOnsLink"],
  ", ",
  ButtonBox["MetricSimplify",
    ButtonData:>{"MetricSimplify"},
    ButtonStyle->"AddOnsLink"],
  "."
}], "MathCaption"],

Cell[CellGroupData[{

Cell["Examples", "ExampleSection"],

Cell[BoxData[
    \(Needs["\<TensorCalculus4`Tensorial`\>"]\)], "Input",
  CellLabel->"In[1]:="],

Cell["Save old settings and declare a flavor.", "Text"],

Cell[BoxData[{
    \(\(oldflavors = IndexFlavors;\)\), "\n", 
    \(\(ClearIndexFlavor /@ oldflavors;\)\), "\[IndentingNewLine]", 
    \(DeclareIndexFlavor[{red, Red}]\)}], "Input",
  CellLabel->"In[2]:="],

Cell[BoxData[
    \(DefineTensorShortcuts[{{x, c}, 1}, {{a, b}, 2}]\)], "Input",
  CellLabel->"In[5]:="],

Cell[CellGroupData[{

Cell[BoxData[{
    \(2  auu[i, j] bdd[j, k] cd[i]\), "\[IndentingNewLine]", 
    \(Print["\<Swap i index\>"]\), "\[IndentingNewLine]", 
    \(%% // UpDownSwap[i]\), "\[IndentingNewLine]", 
    \(Print["\<Swap j index\>"]\), "\[IndentingNewLine]", 
    \(%% // UpDownSwap[j]\), "\[IndentingNewLine]", 
    \(Print["\<Swapping k does nothing because it is not a dummy index\>"]\), \
"\[IndentingNewLine]", 
    \(%% // UpDownSwap[k]\)}], "Input",
  CellLabel->"In[6]:="],

Cell[BoxData[
    RowBox[{"2", " ", 
      InterpretationBox[
        SubsuperscriptBox["a", 
          RowBox[{
            TagBox[
              StyleBox["i",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox["j",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}], \(i  j\)],
        Tensor[ a, {i, j}, {Void, Void}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["b", \(j  k\), 
          RowBox[{
            TagBox[
              StyleBox["j",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox["k",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ b, {Void, Void}, {j, k}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["c", "i", 
          TagBox[
            StyleBox["i",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)]],
        Tensor[ c, {Void}, {i}],
        Editable->False]}]], "Output",
  CellLabel->"Out[6]="],

Cell[BoxData[
    \("Swap i index"\)], "Print",
  CellLabel->"From In[6]:="],

Cell[BoxData[
    RowBox[{"2", " ", 
      InterpretationBox[
        SubsuperscriptBox["a", 
          RowBox[{"i", 
            TagBox[
              StyleBox["j",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}], 
          RowBox[{
            TagBox[
              StyleBox["i",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "j"}]],
        Tensor[ a, {Void, j}, {i, Void}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["b", \(j  k\), 
          RowBox[{
            TagBox[
              StyleBox["j",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox["k",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ b, {Void, Void}, {j, k}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["c", 
          TagBox[
            StyleBox["i",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], "i"],
        Tensor[ c, {i}, {Void}],
        Editable->False]}]], "Output",
  CellLabel->"Out[8]="],

Cell[BoxData[
    \("Swap j index"\)], "Print",
  CellLabel->"From In[6]:="],

Cell[BoxData[
    RowBox[{"2", " ", 
      InterpretationBox[
        SubsuperscriptBox["a", \(i  j\), 
          RowBox[{
            TagBox[
              StyleBox["i",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox["j",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ a, {Void, Void}, {i, j}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["b", 
          RowBox[{
            TagBox[
              StyleBox["j",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "k"}], 
          RowBox[{"j", 
            TagBox[
              StyleBox["k",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ b, {j, Void}, {Void, k}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["c", 
          TagBox[
            StyleBox["i",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], "i"],
        Tensor[ c, {i}, {Void}],
        Editable->False]}]], "Output",
  CellLabel->"Out[10]="],

Cell[BoxData[
    \("Swapping k does nothing because it is not a dummy index"\)], "Print",
  CellLabel->"From In[6]:="],

Cell[BoxData[
    RowBox[{"2", " ", 
      InterpretationBox[
        SubsuperscriptBox["a", \(i  j\), 
          RowBox[{
            TagBox[
              StyleBox["i",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox["j",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ a, {Void, Void}, {i, j}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["b", 
          RowBox[{
            TagBox[
              StyleBox["j",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "k"}], 
          RowBox[{"j", 
            TagBox[
              StyleBox["k",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ b, {j, Void}, {Void, k}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["c", 
          TagBox[
            StyleBox["i",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], "i"],
        Tensor[ c, {i}, {Void}],
        Editable->False]}]], "Output",
  CellLabel->"Out[12]="]
}, Open  ]],

Cell["The flavor must be on the index.", "Text"],

Cell[CellGroupData[{

Cell[BoxData[{
    \(2  auu[i, j] bdd[j, k] cd[i] // 
      ToFlavor[red]\), "\[IndentingNewLine]", 
    \(Print["\<Swap i index\>"]\), "\[IndentingNewLine]", 
    \(%% // UpDownSwap[red@i]\), "\[IndentingNewLine]", 
    \(Print["\<Swap j index\>"]\), "\[IndentingNewLine]", 
    \(%% // UpDownSwap[red@j]\), "\[IndentingNewLine]", 
    \(Print["\<Swapping i without the color has no effect\>"]\), "\
\[IndentingNewLine]", 
    \(%% // UpDownSwap[i]\)}], "Input",
  CellLabel->"In[13]:="],

Cell[BoxData[
    RowBox[{"2", " ", 
      InterpretationBox[
        SubsuperscriptBox["a", 
          RowBox[{
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["i",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["j",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}], 
          RowBox[{
            TagBox[
              StyleBox["i",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
            TagBox[
              StyleBox["j",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}]],
        Tensor[ a, {
          red[ i], 
          red[ j]}, {Void, Void}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["b", 
          RowBox[{
            TagBox[
              StyleBox["j",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
            TagBox[
              StyleBox["k",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
          RowBox[{
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["j",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["k",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ b, {Void, Void}, {
          red[ j], 
          red[ k]}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["c", 
          TagBox[
            StyleBox["i",
              FontColor->RGBColor[1, 0, 0]],
            (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
          TagBox[
            StyleBox[
              TagBox[
                StyleBox["i",
                  FontColor->RGBColor[1, 0, 0]],
                (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)]],
        Tensor[ c, {Void}, {
          red[ i]}],
        Editable->False]}]], "Output",
  CellLabel->"Out[13]="],

Cell[BoxData[
    \("Swap i index"\)], "Print",
  CellLabel->"From In[13]:="],

Cell[BoxData[
    RowBox[{"2", " ", 
      InterpretationBox[
        SubsuperscriptBox["a", 
          RowBox[{
            TagBox[
              StyleBox["i",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["j",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}], 
          RowBox[{
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["i",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox["j",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}]],
        Tensor[ a, {Void, 
          red[ j]}, {
          red[ i], Void}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["b", 
          RowBox[{
            TagBox[
              StyleBox["j",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
            TagBox[
              StyleBox["k",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
          RowBox[{
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["j",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["k",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ b, {Void, Void}, {
          red[ j], 
          red[ k]}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["c", 
          TagBox[
            StyleBox[
              TagBox[
                StyleBox["i",
                  FontColor->RGBColor[1, 0, 0]],
                (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], 
          TagBox[
            StyleBox["i",
              FontColor->RGBColor[1, 0, 0]],
            (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]],
        Tensor[ c, {
          red[ i]}, {Void}],
        Editable->False]}]], "Output",
  CellLabel->"Out[15]="],

Cell[BoxData[
    \("Swap j index"\)], "Print",
  CellLabel->"From In[13]:="],

Cell[BoxData[
    RowBox[{"2", " ", 
      InterpretationBox[
        SubsuperscriptBox["a", 
          RowBox[{
            TagBox[
              StyleBox["i",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
            TagBox[
              StyleBox["j",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
          RowBox[{
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["i",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["j",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ a, {Void, Void}, {
          red[ i], 
          red[ j]}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["b", 
          RowBox[{
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["j",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox["k",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
          RowBox[{
            TagBox[
              StyleBox["j",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["k",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ b, {
          red[ j], Void}, {Void, 
          red[ k]}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["c", 
          TagBox[
            StyleBox[
              TagBox[
                StyleBox["i",
                  FontColor->RGBColor[1, 0, 0]],
                (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], 
          TagBox[
            StyleBox["i",
              FontColor->RGBColor[1, 0, 0]],
            (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]],
        Tensor[ c, {
          red[ i]}, {Void}],
        Editable->False]}]], "Output",
  CellLabel->"Out[17]="],

Cell[BoxData[
    \("Swapping i without the color has no effect"\)], "Print",
  CellLabel->"From In[13]:="],

Cell[BoxData[
    RowBox[{"2", " ", 
      InterpretationBox[
        SubsuperscriptBox["a", 
          RowBox[{
            TagBox[
              StyleBox["i",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
            TagBox[
              StyleBox["j",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
          RowBox[{
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["i",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["j",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ a, {Void, Void}, {
          red[ i], 
          red[ j]}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["b", 
          RowBox[{
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["j",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox["k",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
          RowBox[{
            TagBox[
              StyleBox["j",
                FontColor->RGBColor[1, 0, 0]],
              (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
            TagBox[
              StyleBox[
                TagBox[
                  StyleBox["k",
                    FontColor->RGBColor[1, 0, 0]],
                  (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ b, {
          red[ j], Void}, {Void, 
          red[ k]}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["c", 
          TagBox[
            StyleBox[
              TagBox[
                StyleBox["i",
                  FontColor->RGBColor[1, 0, 0]],
                (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], 
          TagBox[
            StyleBox["i",
              FontColor->RGBColor[1, 0, 0]],
            (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]],
        Tensor[ c, {
          red[ i]}, {Void}],
        Editable->False]}]], "Output",
  CellLabel->"Out[19]="]
}, Open  ]],

Cell["\<\
UpDownSwap is mapped over lists, single equations and sums, but not other \
subexpressions.\
\>", "Text"],

Cell[CellGroupData[{

Cell[BoxData[{
    \({xu[i] cd[i] + bud[i, i] \[Equal] aud[i, i], 
      bud[i, j] xu[j] \[GreaterEqual] 
        aud[i, j] cu[j]}\), "\[IndentingNewLine]", 
    \(Print["\<Swapping i works on first equation\>"]\), \
"\[IndentingNewLine]", 
    \(%% // UpDownSwap[i]\), "\[IndentingNewLine]", 
    \(Print["\<Swapping j works on second equation\>"]\), \
"\[IndentingNewLine]", 
    \(%% // UpDownSwap[j]\)}], "Input",
  CellLabel->"In[20]:="],

Cell[BoxData[
    RowBox[{"{", 
      RowBox[{
        RowBox[{
          RowBox[{
            InterpretationBox[
              SubsuperscriptBox["b", 
                RowBox[{
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "i"}], 
                RowBox[{"i", 
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]}]],
              Tensor[ b, {i, Void}, {Void, i}],
              Editable->False], "+", 
            RowBox[{
              InterpretationBox[
                SubsuperscriptBox["c", "i", 
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ c, {Void}, {i}],
                Editable->False], " ", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "i"],
                Tensor[ x, {i}, {Void}],
                Editable->False]}]}], "\[Equal]", 
          InterpretationBox[
            SubsuperscriptBox["a", 
              RowBox[{
                TagBox[
                  StyleBox["i",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "i"}], 
              RowBox[{"i", 
                TagBox[
                  StyleBox["i",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)]}]],
            Tensor[ a, {i, Void}, {Void, i}],
            Editable->False]}], ",", 
        RowBox[{
          RowBox[{
            InterpretationBox[
              SubsuperscriptBox["b", 
                RowBox[{
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "j"}], 
                RowBox[{"i", 
                  TagBox[
                    StyleBox["j",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]}]],
              Tensor[ b, {i, Void}, {Void, j}],
              Editable->False], " ", 
            InterpretationBox[
              SubsuperscriptBox["x", 
                TagBox[
                  StyleBox["j",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "j"],
              Tensor[ x, {j}, {Void}],
              Editable->False]}], "\[GreaterEqual]", 
          RowBox[{
            InterpretationBox[
              SubsuperscriptBox["a", 
                RowBox[{
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "j"}], 
                RowBox[{"i", 
                  TagBox[
                    StyleBox["j",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]}]],
              Tensor[ a, {i, Void}, {Void, j}],
              Editable->False], " ", 
            InterpretationBox[
              SubsuperscriptBox["c", 
                TagBox[
                  StyleBox["j",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "j"],
              Tensor[ c, {j}, {Void}],
              Editable->False]}]}]}], "}"}]], "Output",
  CellLabel->"Out[20]="],

Cell[BoxData[
    \("Swapping i works on first equation"\)], "Print",
  CellLabel->"From In[20]:="],

Cell[BoxData[
    RowBox[{"{", 
      RowBox[{
        RowBox[{
          RowBox[{
            InterpretationBox[
              SubsuperscriptBox["b", 
                RowBox[{"i", 
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]}], 
                RowBox[{
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "i"}]],
              Tensor[ b, {Void, i}, {i, Void}],
              Editable->False], "+", 
            RowBox[{
              InterpretationBox[
                SubsuperscriptBox["c", 
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "i"],
                Tensor[ c, {i}, {Void}],
                Editable->False], " ", 
              InterpretationBox[
                SubsuperscriptBox["x", "i", 
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ x, {Void}, {i}],
                Editable->False]}]}], "\[Equal]", 
          InterpretationBox[
            SubsuperscriptBox["a", 
              RowBox[{"i", 
                TagBox[
                  StyleBox["i",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)]}], 
              RowBox[{
                TagBox[
                  StyleBox["i",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "i"}]],
            Tensor[ a, {Void, i}, {i, Void}],
            Editable->False]}], ",", 
        RowBox[{
          RowBox[{
            InterpretationBox[
              SubsuperscriptBox["b", 
                RowBox[{
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "j"}], 
                RowBox[{"i", 
                  TagBox[
                    StyleBox["j",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]}]],
              Tensor[ b, {i, Void}, {Void, j}],
              Editable->False], " ", 
            InterpretationBox[
              SubsuperscriptBox["x", 
                TagBox[
                  StyleBox["j",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "j"],
              Tensor[ x, {j}, {Void}],
              Editable->False]}], "\[GreaterEqual]", 
          RowBox[{
            InterpretationBox[
              SubsuperscriptBox["a", 
                RowBox[{
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "j"}], 
                RowBox[{"i", 
                  TagBox[
                    StyleBox["j",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]}]],
              Tensor[ a, {i, Void}, {Void, j}],
              Editable->False], " ", 
            InterpretationBox[
              SubsuperscriptBox["c", 
                TagBox[
                  StyleBox["j",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "j"],
              Tensor[ c, {j}, {Void}],
              Editable->False]}]}]}], "}"}]], "Output",
  CellLabel->"Out[22]="],

Cell[BoxData[
    \("Swapping j works on second equation"\)], "Print",
  CellLabel->"From In[20]:="],

Cell[BoxData[
    RowBox[{"{", 
      RowBox[{
        RowBox[{
          RowBox[{
            InterpretationBox[
              SubsuperscriptBox["b", 
                RowBox[{"i", 
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]}], 
                RowBox[{
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "i"}]],
              Tensor[ b, {Void, i}, {i, Void}],
              Editable->False], "+", 
            RowBox[{
              InterpretationBox[
                SubsuperscriptBox["c", 
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "i"],
                Tensor[ c, {i}, {Void}],
                Editable->False], " ", 
              InterpretationBox[
                SubsuperscriptBox["x", "i", 
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ x, {Void}, {i}],
                Editable->False]}]}], "\[Equal]", 
          InterpretationBox[
            SubsuperscriptBox["a", 
              RowBox[{"i", 
                TagBox[
                  StyleBox["i",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)]}], 
              RowBox[{
                TagBox[
                  StyleBox["i",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "i"}]],
            Tensor[ a, {Void, i}, {i, Void}],
            Editable->False]}], ",", 
        RowBox[{
          RowBox[{
            InterpretationBox[
              SubsuperscriptBox["b", 
                RowBox[{
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], 
                  TagBox[
                    StyleBox["j",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]}], \(i  j\)],
              Tensor[ b, {i, j}, {Void, Void}],
              Editable->False], " ", 
            InterpretationBox[
              SubsuperscriptBox["x", "j", 
                TagBox[
                  StyleBox["j",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)]],
              Tensor[ x, {Void}, {j}],
              Editable->False]}], "\[GreaterEqual]", 
          RowBox[{
            InterpretationBox[
              SubsuperscriptBox["a", 
                RowBox[{
                  TagBox[
                    StyleBox["i",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], 
                  TagBox[
                    StyleBox["j",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]}], \(i  j\)],
              Tensor[ a, {i, j}, {Void, Void}],
              Editable->False], " ", 
            InterpretationBox[
              SubsuperscriptBox["c", "j", 
                TagBox[
                  StyleBox["j",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)]],
              Tensor[ c, {Void}, {j}],
              Editable->False]}]}]}], "}"}]], "Output",
  CellLabel->"Out[24]="]
}, Open  ]],

Cell["\<\
UpDownSwap will work on any term that ParseTermIndices can extract the \
indices.\
\>", "Text"],

Cell[CellGroupData[{

Cell[BoxData[{
    \({adu[i, j] xd[j], 
      xu[j] \(PartialD[{x, \[Delta], g, \[CapitalGamma]}]\)[cd[i], 
          xu[j]], \((k1\ xu[j])\) . \((k2\ cd[j])\), 
      xu[j]\[CircleTimes]cd[j]}\), "\[IndentingNewLine]", 
    \(% // UpDownSwap[j]\)}], "Input",
  CellLabel->"In[25]:="],

Cell[BoxData[
    RowBox[{"{", 
      RowBox[{
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["a", 
              RowBox[{"i", 
                TagBox[
                  StyleBox["j",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)]}], 
              RowBox[{
                TagBox[
                  StyleBox["i",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "j"}]],
            Tensor[ a, {Void, j}, {i, Void}],
            Editable->False], " ", 
          InterpretationBox[
            SubsuperscriptBox["x", "j", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]],
            Tensor[ x, {Void}, {j}],
            Editable->False]}], ",", 
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["x", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "j"],
            Tensor[ x, {j}, {Void}],
            Editable->False], " ", 
          InterpretationBox[
            FractionBox[
              RowBox[{"\[PartialD]", 
                InterpretationBox[
                  SubsuperscriptBox["c", "i", 
                    TagBox[
                      StyleBox["i",
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ c, {Void}, {i}],
                  Editable->False]}], 
              RowBox[{"\[PartialD]", 
                InterpretationBox[
                  SubsuperscriptBox["x", 
                    TagBox[
                      StyleBox["j",
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], "j"],
                  Tensor[ x, {j}, {Void}],
                  Editable->False]}]],
            PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
              Tensor[ c, {Void}, {i}], 
              Tensor[ x, {j}, {Void}]],
            Editable->False]}], ",", 
        RowBox[{
          RowBox[{"(", 
            RowBox[{"k1", " ", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["j",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "j"],
                Tensor[ x, {j}, {Void}],
                Editable->False]}], ")"}], ".", 
          RowBox[{"(", 
            RowBox[{"k2", " ", 
              InterpretationBox[
                SubsuperscriptBox["c", "j", 
                  TagBox[
                    StyleBox["j",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ c, {Void}, {j}],
                Editable->False]}], ")"}]}], ",", 
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["x", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "j"],
            Tensor[ x, {j}, {Void}],
            Editable->False], "\[CircleTimes]", 
          InterpretationBox[
            SubsuperscriptBox["c", "j", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]],
            Tensor[ c, {Void}, {j}],
            Editable->False]}]}], "}"}]], "Output",
  CellLabel->"Out[25]="],

Cell[BoxData[
    RowBox[{"{", 
      RowBox[{
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["a", \(i  j\), 
              RowBox[{
                TagBox[
                  StyleBox["i",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], 
                TagBox[
                  StyleBox["j",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)]}]],
            Tensor[ a, {Void, Void}, {i, j}],
            Editable->False], " ", 
          InterpretationBox[
            SubsuperscriptBox["x", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "j"],
            Tensor[ x, {j}, {Void}],
            Editable->False]}], ",", 
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["x", "j", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]],
            Tensor[ x, {Void}, {j}],
            Editable->False], " ", 
          InterpretationBox[
            FractionBox[
              RowBox[{"\[PartialD]", 
                InterpretationBox[
                  SubsuperscriptBox["c", "i", 
                    TagBox[
                      StyleBox["i",
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ c, {Void}, {i}],
                  Editable->False]}], 
              RowBox[{"\[PartialD]", 
                InterpretationBox[
                  SubsuperscriptBox["x", "j", 
                    TagBox[
                      StyleBox["j",
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ x, {Void}, {j}],
                  Editable->False]}]],
            PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
              Tensor[ c, {Void}, {i}], 
              Tensor[ x, {Void}, {j}]],
            Editable->False]}], ",", 
        RowBox[{
          RowBox[{"(", 
            RowBox[{"k1", " ", 
              InterpretationBox[
                SubsuperscriptBox["x", "j", 
                  TagBox[
                    StyleBox["j",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ x, {Void}, {j}],
                Editable->False]}], ")"}], ".", 
          RowBox[{"(", 
            RowBox[{"k2", " ", 
              InterpretationBox[
                SubsuperscriptBox["c", 
                  TagBox[
                    StyleBox["j",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "j"],
                Tensor[ c, {j}, {Void}],
                Editable->False]}], ")"}]}], ",", 
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["x", "j", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]],
            Tensor[ x, {Void}, {j}],
            Editable->False], "\[CircleTimes]", 
          InterpretationBox[
            SubsuperscriptBox["c", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "j"],
            Tensor[ c, {j}, {Void}],
            Editable->False]}]}], "}"}]], "Output",
  CellLabel->"Out[26]="]
}, Open  ]],

Cell["Restore old settings...", "Text"],

Cell[BoxData[
    \(ClearTensorShortcuts[{{x, c}, 1}, {{a, b}, 2}]\)], "Input",
  CellLabel->"In[27]:="],

Cell[BoxData[{
    \(\(ClearIndexFlavor /@ IndexFlavors;\)\), "\[IndentingNewLine]", 
    \(\(DeclareIndexFlavor /@ oldflavors;\)\), "\[IndentingNewLine]", 
    \(Clear[oldflavors]\)}], "Input",
  CellLabel->"In[28]:="]
}, Open  ]]
}, Open  ]]
},
FrontEndVersion->"5.2 for Microsoft Windows",
ScreenRectangle->{{0, 1680}, {0, 965}},
ScreenStyleEnvironment->"Working",
WindowToolbars->{},
WindowSize->{669, 474},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
ShowSelection->True,
CommonDefaultFormatTypes->{"Output"->StandardForm},
Magnification->1,
StyleDefinitions -> "HelpBrowser.nb"
]

(*******************************************************************
Cached data follows.  If you edit this Notebook file directly, not
using Mathematica, you must remove the line containing CacheID at
the top of  the file.  The cache data will then be recreated when
you save this file from within Mathematica.
*******************************************************************)

(*CellTagsOutline
CellTagsIndex->{
  "Function?"->{
    Cell[1776, 53, 57, 1, 41, "ObjectName",
      CellTags->"Function?"],
    Cell[1836, 56, 555, 22, 50, "Usage",
      CellTags->"Function?"]}
  }
*)

(*CellTagsIndex
CellTagsIndex->{
  {"Function?", 42857, 1250}
  }
*)

(*NotebookFileOutline
Notebook[{

Cell[CellGroupData[{
Cell[1776, 53, 57, 1, 41, "ObjectName",
  CellTags->"Function?"],
Cell[1836, 56, 555, 22, 50, "Usage",
  CellTags->"Function?"],
Cell[2394, 80, 64, 0, 41, "MathCaption"],
Cell[2461, 82, 143, 5, 41, "MathCaption"],
Cell[2607, 89, 470, 18, 41, "MathCaption"],

Cell[CellGroupData[{
Cell[3102, 111, 34, 0, 39, "ExampleSection"],
Cell[3139, 113, 96, 2, 29, "Input"],
Cell[3238, 117, 55, 0, 25, "Text"],
Cell[3296, 119, 205, 4, 69, "Input"],
Cell[3504, 125, 104, 2, 29, "Input"],

Cell[CellGroupData[{
Cell[3633, 131, 468, 9, 149, "Input"],
Cell[4104, 142, 1225, 36, 30, "Output"],
Cell[5332, 180, 76, 2, 23, "Print"],
Cell[5411, 184, 1246, 37, 30, "Output"],
Cell[6660, 223, 76, 2, 23, "Print"],
Cell[6739, 227, 1247, 37, 30, "Output"],
Cell[7989, 266, 119, 2, 23, "Print"],
Cell[8111, 270, 1247, 37, 30, "Output"]
}, Open  ]],
Cell[9373, 310, 48, 0, 25, "Text"],

Cell[CellGroupData[{
Cell[9446, 314, 488, 10, 149, "Input"],
Cell[9937, 326, 2987, 83, 30, "Output"],
Cell[12927, 411, 77, 2, 23, "Print"],
Cell[13007, 415, 2987, 83, 30, "Output"],
Cell[15997, 500, 77, 2, 23, "Print"],
Cell[16077, 504, 2987, 83, 30, "Output"],
Cell[19067, 589, 107, 2, 23, "Print"],
Cell[19177, 593, 2987, 83, 30, "Output"]
}, Open  ]],
Cell[22179, 679, 115, 3, 25, "Text"],

Cell[CellGroupData[{
Cell[22319, 686, 442, 10, 109, "Input"],
Cell[22764, 698, 3686, 97, 30, "Output"],
Cell[26453, 797, 99, 2, 23, "Print"],
Cell[26555, 801, 3686, 97, 30, "Output"],
Cell[30244, 900, 100, 2, 23, "Print"],
Cell[30347, 904, 3632, 95, 30, "Output"]
}, Open  ]],
Cell[33994, 1002, 105, 3, 25, "Text"],

Cell[CellGroupData[{
Cell[34124, 1009, 284, 6, 69, "Input"],
Cell[34411, 1017, 3640, 97, 51, "Output"],
Cell[38054, 1116, 3615, 96, 51, "Output"]
}, Open  ]],
Cell[41684, 1215, 39, 0, 25, "Text"],
Cell[41726, 1217, 104, 2, 29, "Input"],
Cell[41833, 1221, 219, 4, 69, "Input"]
}, Open  ]]
}, Open  ]]
}
]
*)



(*******************************************************************
End of Mathematica Notebook file.
*******************************************************************)

