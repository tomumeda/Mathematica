(************** Content-type: application/mathematica **************
                     CreatedBy='Mathematica 5.2'

                    Mathematica-Compatible Notebook

This notebook can be used with any Mathematica-compatible
application, such as Mathematica, MathReader or Publicon. The data
for the notebook starts with the line containing stars above.

To get the notebook into a Mathematica-compatible application, do
one of the following:

* Save the data starting with the line of stars above into a file
  with a name ending in .nb, then open the file inside the
  application;

* Copy the data starting with the line of stars above to the
  clipboard, then use the Paste menu command inside the application.

Data for notebooks contains only printable 7-bit ASCII and can be
sent directly in email or through ftp in text mode.  Newlines can be
CR, LF or CRLF (Unix, Macintosh or MS-DOS style).

NOTE: If you modify the data for this notebook not in a Mathematica-
compatible application, you must delete the line below containing
the word CacheID, otherwise Mathematica-compatible applications may
try to use invalid cache data.

For more information on notebooks and Mathematica-compatible 
applications, contact Wolfram Research:
  web: http://www.wolfram.com
  email: info@wolfram.com
  phone: +1-217-398-0700 (U.S.)

Notebook reader applications are available free of charge from 
Wolfram Research.
*******************************************************************)

(*CacheID: 232*)


(*NotebookFileLineBreakTest
NotebookFileLineBreakTest*)
(*NotebookOptionsPosition[     59389,       1661]*)
(*NotebookOutlinePosition[     60413,       1697]*)
(*  CellTagsIndexPosition[     60337,       1691]*)
(*WindowFrame->Normal*)



Notebook[{

Cell[CellGroupData[{
Cell["UpDownAdjust", "ObjectName",
  CellTags->"Function?"],

Cell[TextData[{
  "\[FilledSmallSquare] ",
  Cell[BoxData[
      RowBox[{
        StyleBox["UpDownAdjust",
          "MR"], 
        StyleBox["[",
          "MR"], 
        StyleBox["sum",
          "TI"], 
        StyleBox["]",
          "MR"]}]]],
  " will attemp to simplify terms that differ only in the up/down \
configuration of their dummy indices."
}], "Usage",
  CellTags->"Function?"],

Cell[TextData[{
  Cell[BoxData[
      \(UpDownAdjust\)]],
  " can be used after ",
  Cell[BoxData[
      \(TensorSimplify\)]],
  " to attempt to further simplify an expression consisting of a sum of \
terms.  It is not automatiacally used because it might cause many changes in \
term configuration that may be unwanted. "
}], "MathCaption"],

Cell[TextData[{
  "See also: ",
  ButtonBox["TensorSimplify",
    ButtonData:>{"TensorSimplify"},
    ButtonStyle->"AddOnsLink"],
  ", ",
  ButtonBox["UpDownSwap",
    ButtonData:>{"UpDownSwap"},
    ButtonStyle->"AddOnsLink"],
  ", ",
  ButtonBox["UpDownAdjust",
    ButtonData:>{"UpDownAdjust"},
    ButtonStyle->"AddOnsLink"],
  "."
}], "MathCaption"],

Cell[CellGroupData[{

Cell["Examples", "ExampleSection"],

Cell[BoxData[
    \(Needs["\<TensorCalculus4`Tensorial`\>"]\)], "Input",
  CellLabel->"In[1]:="],

Cell[BoxData[{
    \(DefineTensorShortcuts[{{x, p, \[Lambda]}, 1}, {{R, T}, 2}, {R, 
        4}]\), "\[IndentingNewLine]", 
    \(\(labs99 = {x, \[Delta], g, \[CapitalGamma]};\)\)}], "Input",
  CellLabel->"In[2]:="],

Cell[CellGroupData[{

Cell[BoxData[{
    \(Tud[a, b] Rud[b, a] + Tdu[a, b] Rdu[b, a] + \ 
      3\), "\[IndentingNewLine]", 
    \(% // UpDownAdjust\)}], "Input",
  CellLabel->"In[4]:="],

Cell[BoxData[
    RowBox[{"3", "+", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["R", 
            RowBox[{
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "a"}], 
            RowBox[{"b", 
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ R, {b, Void}, {Void, a}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["T", 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "b"}], 
            RowBox[{"a", 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ T, {a, Void}, {Void, b}],
          Editable->False]}], "+", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["R", 
            RowBox[{"b", 
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}], 
            RowBox[{
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "a"}]],
          Tensor[ R, {Void, a}, {b, Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["T", 
            RowBox[{"a", 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}], 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "b"}]],
          Tensor[ T, {Void, b}, {a, Void}],
          Editable->False]}]}]], "Output",
  CellLabel->"Out[4]="],

Cell[BoxData[
    RowBox[{"3", "+", 
      RowBox[{"2", " ", 
        InterpretationBox[
          SubsuperscriptBox["R", 
            RowBox[{
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}], \(b  a\)],
          Tensor[ R, {b, a}, {Void, Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["T", \(a  b\), 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ T, {Void, Void}, {a, b}],
          Editable->False]}]}]], "Output",
  CellLabel->"Out[5]="]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
    \(pu[a] Tdd[a, b] + 
      pd[a] Tud[a, b] + \[Lambda]d[b]\), "\[IndentingNewLine]", 
    \(% // UpDownAdjust\)}], "Input",
  CellLabel->"In[6]:="],

Cell[BoxData[
    RowBox[{
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", "a", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ p, {Void}, {a}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["T", 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "b"}], 
            RowBox[{"a", 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ T, {a, Void}, {Void, b}],
          Editable->False]}], "+", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "a"],
          Tensor[ p, {a}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["T", \(a  b\), 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ T, {Void, Void}, {a, b}],
          Editable->False]}], "+", 
      InterpretationBox[
        SubsuperscriptBox["\[Lambda]", "b", 
          TagBox[
            StyleBox["b",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)]],
        Tensor[ \[Lambda], {Void}, {b}],
        Editable->False]}]], "Output",
  CellLabel->"Out[6]="],

Cell[BoxData[
    RowBox[{
      RowBox[{"2", " ", 
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "a"],
          Tensor[ p, {a}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["T", \(a  b\), 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ T, {Void, Void}, {a, b}],
          Editable->False]}], "+", 
      InterpretationBox[
        SubsuperscriptBox["\[Lambda]", "b", 
          TagBox[
            StyleBox["b",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)]],
        Tensor[ \[Lambda], {Void}, {b}],
        Editable->False]}]], "Output",
  CellLabel->"Out[7]="]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
    \(\[Lambda]u[c] \(PartialD[labs99]\)[Tuu[a, b], xu[c]] + \[Lambda]d[
          c] \(PartialD[labs99]\)[Tuu[a, b], 
          xd[c]]\), "\[IndentingNewLine]", 
    \(% // UpDownAdjust\)}], "Input",
  CellLabel->"In[8]:="],

Cell[BoxData[
    RowBox[{
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["\[Lambda]", 
            TagBox[
              StyleBox["c",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "c"],
          Tensor[ \[Lambda], {c}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["T", 
                  RowBox[{
                    TagBox[
                      StyleBox["a",
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox["b",
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}], \(a  b\)],
                Tensor[ T, {a, b}, {Void, Void}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "c"],
                Tensor[ x, {c}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ T, {a, b}, {Void, Void}], 
            Tensor[ x, {c}, {Void}]],
          Editable->False]}], "+", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["\[Lambda]", "c", 
            TagBox[
              StyleBox["c",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ \[Lambda], {Void}, {c}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["T", 
                  RowBox[{
                    TagBox[
                      StyleBox["a",
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox["b",
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}], \(a  b\)],
                Tensor[ T, {a, b}, {Void, Void}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", "c", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ x, {Void}, {c}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ T, {a, b}, {Void, Void}], 
            Tensor[ x, {Void}, {c}]],
          Editable->False]}]}]], "Output",
  CellLabel->"Out[8]="],

Cell[BoxData[
    RowBox[{"2", " ", 
      InterpretationBox[
        SubsuperscriptBox["\[Lambda]", 
          TagBox[
            StyleBox["c",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], "c"],
        Tensor[ \[Lambda], {c}, {Void}],
        Editable->False], " ", 
      InterpretationBox[
        FractionBox[
          RowBox[{"\[PartialD]", 
            InterpretationBox[
              SubsuperscriptBox["T", 
                RowBox[{
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], 
                  TagBox[
                    StyleBox["b",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]}], \(a  b\)],
              Tensor[ T, {a, b}, {Void, Void}],
              Editable->False]}], 
          RowBox[{"\[PartialD]", 
            InterpretationBox[
              SubsuperscriptBox["x", 
                TagBox[
                  StyleBox["c",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "c"],
              Tensor[ x, {c}, {Void}],
              Editable->False]}]],
        PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
          Tensor[ T, {a, b}, {Void, Void}], 
          Tensor[ x, {c}, {Void}]],
        Editable->False]}]], "Output",
  CellLabel->"Out[9]="]
}, Open  ]],

Cell[TextData[{
  Cell[BoxData[
      \(TensorSimplify\)]],
  " leaves a number of terms in the following expression unconsolidated."
}], "Text"],

Cell[CellGroupData[{

Cell[BoxData[{
    \(Tensor[\[Phi]] + pu[a] pd[a]\), "\[IndentingNewLine]", 
    \(\(CovariantD[%, {b, c}];\)\), "\[IndentingNewLine]", 
    \(\(% // ExpandCovariantD[labs99, {d, e}];\)\), "\[IndentingNewLine]", 
    \(test = % // TensorSimplify\)}], "Input",
  CellLabel->"In[10]:="],

Cell[BoxData[
    RowBox[{
      InterpretationBox["\[Phi]",
        Tensor[ \[Phi]],
        Editable->False], "+", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "a"],
          Tensor[ p, {a}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["p", "a", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ p, {Void}, {a}],
          Editable->False]}]}]], "Output",
  CellLabel->"Out[10]="],

Cell[BoxData[
    RowBox[{
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["d",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "d"],
          Tensor[ p, {d}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["p", "a", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ p, {Void}, {a}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "e"}], 
            RowBox[{"a", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {a, Void, Void}, {Void, c, e}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "b", "d"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["d",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, b, d}],
          Editable->False]}], "-", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["d",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "d"],
          Tensor[ p, {d}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["p", "e", 
            TagBox[
              StyleBox["e",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ p, {Void}, {e}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "b", "d"}], 
            RowBox[{"a", 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["d",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {a, Void, Void}, {Void, b, d}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "a"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, c, a}],
          Editable->False]}], "+", 
      InterpretationBox[
        FractionBox[
          RowBox[{\(\[PartialD]\^2\), 
            InterpretationBox["\[Phi]",
              Tensor[ \[Phi]],
              Editable->False]}], 
          RowBox[{"\[PartialD]", 
            InterpretationBox[
              SubsuperscriptBox["x", 
                TagBox[
                  StyleBox["c",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "c"],
              Tensor[ x, {c}, {Void}],
              Editable->False], "\[PartialD]", 
            InterpretationBox[
              SubsuperscriptBox["x", 
                TagBox[
                  StyleBox["b",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "b"],
              Tensor[ x, {b}, {Void}],
              Editable->False]}]],
        PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
          Tensor[ \[Phi]], {
          Tensor[ x, {c}, {Void}], 
          Tensor[ x, {b}, {Void}]}],
        Editable->False], "-", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "b"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, c, b}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox["\[Phi]",
                Tensor[ \[Phi]],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["e",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "e"],
                Tensor[ x, {e}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ \[Phi]], 
            Tensor[ x, {e}, {Void}]],
          Editable->False]}], "+", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", "a", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ p, {Void}, {a}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{\(\[PartialD]\^2\), 
              InterpretationBox[
                SubsuperscriptBox["p", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "a"],
                Tensor[ p, {a}, {Void}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "c"],
                Tensor[ x, {c}, {Void}],
                Editable->False], "\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["b",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "b"],
                Tensor[ x, {b}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {a}, {Void}], {
            Tensor[ x, {c}, {Void}], 
            Tensor[ x, {b}, {Void}]}],
          Editable->False]}], "-", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", "a", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ p, {Void}, {a}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "b"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, c, b}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "a"],
                Tensor[ p, {a}, {Void}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["e",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "e"],
                Tensor[ x, {e}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {a}, {Void}], 
            Tensor[ x, {e}, {Void}]],
          Editable->False]}], "+", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "a"],
          Tensor[ p, {a}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{\(\[PartialD]\^2\), 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "c"],
                Tensor[ x, {c}, {Void}],
                Editable->False], "\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["b",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "b"],
                Tensor[ x, {b}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], {
            Tensor[ x, {c}, {Void}], 
            Tensor[ x, {b}, {Void}]}],
          Editable->False]}], "+", 
      RowBox[{
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "a"],
                Tensor[ p, {a}, {Void}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "c"],
                Tensor[ x, {c}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {a}, {Void}], 
            Tensor[ x, {c}, {Void}]],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["b",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "b"],
                Tensor[ x, {b}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], 
            Tensor[ x, {b}, {Void}]],
          Editable->False]}], "+", 
      RowBox[{
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "a"],
                Tensor[ p, {a}, {Void}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["b",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "b"],
                Tensor[ x, {b}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {a}, {Void}], 
            Tensor[ x, {b}, {Void}]],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "c"],
                Tensor[ x, {c}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], 
            Tensor[ x, {c}, {Void}]],
          Editable->False]}], "-", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "a"],
          Tensor[ p, {a}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "b"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, c, b}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["e",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "e"],
                Tensor[ x, {e}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], 
            Tensor[ x, {e}, {Void}]],
          Editable->False]}]}]], "Output",
  CellLabel->"Out[13]="]
}, Open  ]],

Cell[TextData[{
  Cell[BoxData[
      \(UpDownAdjust\)]],
  " consolidates most of the remaining terms but can't recognize the two \
first partial products. ",
  Cell[BoxData[
      \(UpDownSwap\)]],
  " completes the simplification."
}], "Text"],

Cell[CellGroupData[{

Cell[BoxData[{
    \(test // UpDownAdjust\), "\[IndentingNewLine]", 
    \(MapAt[UpDownSwap[a], %, 7]\)}], "Input",
  CellLabel->"In[14]:="],

Cell[BoxData[
    RowBox[{
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["d",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "d"],
          Tensor[ p, {d}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["p", "a", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ p, {Void}, {a}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "e"}], 
            RowBox[{"a", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {a, Void, Void}, {Void, c, e}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "b", "d"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["d",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, b, d}],
          Editable->False]}], "-", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["d",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "d"],
          Tensor[ p, {d}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["p", "e", 
            TagBox[
              StyleBox["e",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ p, {Void}, {e}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "b", "d"}], 
            RowBox[{"a", 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["d",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {a, Void, Void}, {Void, b, d}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "a"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, c, a}],
          Editable->False]}], "+", 
      InterpretationBox[
        FractionBox[
          RowBox[{\(\[PartialD]\^2\), 
            InterpretationBox["\[Phi]",
              Tensor[ \[Phi]],
              Editable->False]}], 
          RowBox[{"\[PartialD]", 
            InterpretationBox[
              SubsuperscriptBox["x", 
                TagBox[
                  StyleBox["c",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "c"],
              Tensor[ x, {c}, {Void}],
              Editable->False], "\[PartialD]", 
            InterpretationBox[
              SubsuperscriptBox["x", 
                TagBox[
                  StyleBox["b",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "b"],
              Tensor[ x, {b}, {Void}],
              Editable->False]}]],
        PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
          Tensor[ \[Phi]], {
          Tensor[ x, {c}, {Void}], 
          Tensor[ x, {b}, {Void}]}],
        Editable->False], "-", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "b"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, c, b}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox["\[Phi]",
                Tensor[ \[Phi]],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["e",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "e"],
                Tensor[ x, {e}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ \[Phi]], 
            Tensor[ x, {e}, {Void}]],
          Editable->False]}], "+", 
      RowBox[{"2", " ", 
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "a"],
          Tensor[ p, {a}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{\(\[PartialD]\^2\), 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "c"],
                Tensor[ x, {c}, {Void}],
                Editable->False], "\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["b",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "b"],
                Tensor[ x, {b}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], {
            Tensor[ x, {c}, {Void}], 
            Tensor[ x, {b}, {Void}]}],
          Editable->False]}], "+", 
      RowBox[{
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "a"],
                Tensor[ p, {a}, {Void}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "c"],
                Tensor[ x, {c}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {a}, {Void}], 
            Tensor[ x, {c}, {Void}]],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["b",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "b"],
                Tensor[ x, {b}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], 
            Tensor[ x, {b}, {Void}]],
          Editable->False]}], "+", 
      RowBox[{
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "a"],
                Tensor[ p, {a}, {Void}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["b",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "b"],
                Tensor[ x, {b}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {a}, {Void}], 
            Tensor[ x, {b}, {Void}]],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "c"],
                Tensor[ x, {c}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], 
            Tensor[ x, {c}, {Void}]],
          Editable->False]}], "-", 
      RowBox[{"2", " ", 
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "a"],
          Tensor[ p, {a}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "b"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, c, b}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["e",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "e"],
                Tensor[ x, {e}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], 
            Tensor[ x, {e}, {Void}]],
          Editable->False]}]}]], "Output",
  CellLabel->"Out[14]="],

Cell[BoxData[
    RowBox[{
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["d",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "d"],
          Tensor[ p, {d}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["p", "a", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ p, {Void}, {a}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "e"}], 
            RowBox[{"a", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {a, Void, Void}, {Void, c, e}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "b", "d"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["d",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, b, d}],
          Editable->False]}], "-", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["d",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "d"],
          Tensor[ p, {d}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["p", "e", 
            TagBox[
              StyleBox["e",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ p, {Void}, {e}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "b", "d"}], 
            RowBox[{"a", 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["d",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {a, Void, Void}, {Void, b, d}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "a"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["a",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, c, a}],
          Editable->False]}], "+", 
      InterpretationBox[
        FractionBox[
          RowBox[{\(\[PartialD]\^2\), 
            InterpretationBox["\[Phi]",
              Tensor[ \[Phi]],
              Editable->False]}], 
          RowBox[{"\[PartialD]", 
            InterpretationBox[
              SubsuperscriptBox["x", 
                TagBox[
                  StyleBox["c",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "c"],
              Tensor[ x, {c}, {Void}],
              Editable->False], "\[PartialD]", 
            InterpretationBox[
              SubsuperscriptBox["x", 
                TagBox[
                  StyleBox["b",
                    ShowContents->False],
                  (StyleForm[ #, ShowContents -> False]&)], "b"],
              Tensor[ x, {b}, {Void}],
              Editable->False]}]],
        PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
          Tensor[ \[Phi]], {
          Tensor[ x, {c}, {Void}], 
          Tensor[ x, {b}, {Void}]}],
        Editable->False], "-", 
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "b"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, c, b}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox["\[Phi]",
                Tensor[ \[Phi]],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["e",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "e"],
                Tensor[ x, {e}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ \[Phi]], 
            Tensor[ x, {e}, {Void}]],
          Editable->False]}], "+", 
      RowBox[{"2", " ", 
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "a"],
          Tensor[ p, {a}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{\(\[PartialD]\^2\), 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "c"],
                Tensor[ x, {c}, {Void}],
                Editable->False], "\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["b",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "b"],
                Tensor[ x, {b}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], {
            Tensor[ x, {c}, {Void}], 
            Tensor[ x, {b}, {Void}]}],
          Editable->False]}], "+", 
      RowBox[{"2", " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "a"],
                Tensor[ p, {a}, {Void}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["c",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "c"],
                Tensor[ x, {c}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {a}, {Void}], 
            Tensor[ x, {c}, {Void}]],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["b",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "b"],
                Tensor[ x, {b}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], 
            Tensor[ x, {b}, {Void}]],
          Editable->False]}], "-", 
      RowBox[{"2", " ", 
        InterpretationBox[
          SubsuperscriptBox["p", 
            TagBox[
              StyleBox["a",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], "a"],
          Tensor[ p, {a}, {Void}],
          Editable->False], " ", 
        InterpretationBox[
          SubsuperscriptBox["\[CapitalGamma]", 
            RowBox[{
              TagBox[
                StyleBox["e",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "c", "b"}], 
            RowBox[{"e", 
              TagBox[
                StyleBox["c",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], 
              TagBox[
                StyleBox["b",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]}]],
          Tensor[ \[CapitalGamma], {e, Void, Void}, {Void, c, b}],
          Editable->False], " ", 
        InterpretationBox[
          FractionBox[
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["p", "a", 
                  TagBox[
                    StyleBox["a",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)]],
                Tensor[ p, {Void}, {a}],
                Editable->False]}], 
            RowBox[{"\[PartialD]", 
              InterpretationBox[
                SubsuperscriptBox["x", 
                  TagBox[
                    StyleBox["e",
                      ShowContents->False],
                    (StyleForm[ #, ShowContents -> False]&)], "e"],
                Tensor[ x, {e}, {Void}],
                Editable->False]}]],
          PartialD[ {x, \[Delta], g, \[CapitalGamma]}][ 
            Tensor[ p, {Void}, {a}], 
            Tensor[ x, {e}, {Void}]],
          Editable->False]}]}]], "Output",
  CellLabel->"Out[15]="]
}, Open  ]],

Cell[BoxData[
    \(ClearTensorShortcuts[{{x, p, \[Lambda]}, 1}, {{R, T}, 2}, {R, 
        4}]\)], "Input",
  CellLabel->"In[16]:="],

Cell[BoxData[
    \(Clear[test, labs99]\)], "Input",
  CellLabel->"In[17]:="]
}, Open  ]]
}, Open  ]]
},
FrontEndVersion->"5.2 for Microsoft Windows",
ScreenRectangle->{{0, 1680}, {0, 965}},
ScreenStyleEnvironment->"Working",
WindowToolbars->{},
WindowSize->{733, 467},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
ShowSelection->True,
CommonDefaultFormatTypes->{"Output"->StandardForm},
Magnification->1,
StyleDefinitions -> "HelpBrowser.nb"
]

(*******************************************************************
Cached data follows.  If you edit this Notebook file directly, not
using Mathematica, you must remove the line containing CacheID at
the top of  the file.  The cache data will then be recreated when
you save this file from within Mathematica.
*******************************************************************)

(*CellTagsOutline
CellTagsIndex->{
  "Function?"->{
    Cell[1776, 53, 59, 1, 41, "ObjectName",
      CellTags->"Function?"],
    Cell[1838, 56, 394, 15, 33, "Usage",
      CellTags->"Function?"]}
  }
*)

(*CellTagsIndex
CellTagsIndex->{
  {"Function?", 60166, 1682}
  }
*)

(*NotebookFileOutline
Notebook[{

Cell[CellGroupData[{
Cell[1776, 53, 59, 1, 41, "ObjectName",
  CellTags->"Function?"],
Cell[1838, 56, 394, 15, 33, "Usage",
  CellTags->"Function?"],
Cell[2235, 73, 341, 9, 58, "MathCaption"],
Cell[2579, 84, 354, 14, 41, "MathCaption"],

Cell[CellGroupData[{
Cell[2958, 102, 34, 0, 39, "ExampleSection"],
Cell[2995, 104, 96, 2, 29, "Input"],
Cell[3094, 108, 215, 4, 49, "Input"],

Cell[CellGroupData[{
Cell[3334, 116, 164, 4, 49, "Input"],
Cell[3501, 122, 2089, 60, 28, "Output"],
Cell[5593, 184, 1042, 29, 28, "Output"]
}, Open  ]],

Cell[CellGroupData[{
Cell[6672, 218, 166, 4, 49, "Input"],
Cell[6841, 224, 1896, 55, 28, "Output"],
Cell[8740, 281, 1114, 32, 28, "Output"]
}, Open  ]],

Cell[CellGroupData[{
Cell[9891, 318, 239, 5, 49, "Input"],
Cell[10133, 325, 3019, 78, 48, "Output"],
Cell[13155, 405, 1457, 39, 48, "Output"]
}, Open  ]],
Cell[14627, 447, 145, 4, 25, "Text"],

Cell[CellGroupData[{
Cell[14797, 455, 284, 5, 89, "Input"],
Cell[15084, 462, 722, 22, 27, "Output"],
Cell[15809, 486, 17264, 458, 90, "Output"]
}, Open  ]],
Cell[33088, 947, 246, 8, 42, "Text"],

Cell[CellGroupData[{
Cell[33359, 959, 140, 3, 49, "Input"],
Cell[33502, 964, 13753, 365, 90, "Output"],
Cell[47258, 1331, 11876, 316, 47, "Output"]
}, Open  ]],
Cell[59149, 1650, 132, 3, 29, "Input"],
Cell[59284, 1655, 77, 2, 29, "Input"]
}, Open  ]]
}, Open  ]]
}
]
*)



(*******************************************************************
End of Mathematica Notebook file.
*******************************************************************)

