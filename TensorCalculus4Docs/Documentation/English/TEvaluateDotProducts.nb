(************** Content-type: application/mathematica **************
                     CreatedBy='Mathematica 5.2'

                    Mathematica-Compatible Notebook

This notebook can be used with any Mathematica-compatible
application, such as Mathematica, MathReader or Publicon. The data
for the notebook starts with the line containing stars above.

To get the notebook into a Mathematica-compatible application, do
one of the following:

* Save the data starting with the line of stars above into a file
  with a name ending in .nb, then open the file inside the
  application;

* Copy the data starting with the line of stars above to the
  clipboard, then use the Paste menu command inside the application.

Data for notebooks contains only printable 7-bit ASCII and can be
sent directly in email or through ftp in text mode.  Newlines can be
CR, LF or CRLF (Unix, Macintosh or MS-DOS style).

NOTE: If you modify the data for this notebook not in a Mathematica-
compatible application, you must delete the line below containing
the word CacheID, otherwise Mathematica-compatible applications may
try to use invalid cache data.

For more information on notebooks and Mathematica-compatible 
applications, contact Wolfram Research:
  web: http://www.wolfram.com
  email: info@wolfram.com
  phone: +1-217-398-0700 (U.S.)

Notebook reader applications are available free of charge from 
Wolfram Research.
*******************************************************************)

(*CacheID: 232*)


(*NotebookFileLineBreakTest
NotebookFileLineBreakTest*)
(*NotebookOptionsPosition[     40667,       1071]*)
(*NotebookOutlinePosition[     41680,       1106]*)
(*  CellTagsIndexPosition[     41604,       1100]*)
(*WindowFrame->Normal*)



Notebook[{

Cell[CellGroupData[{
Cell["EvaluateDotProducts", "ObjectName",
  CellTags->"Function?"],

Cell[TextData[{
  "\[FilledSmallSquare] ",
  Cell[BoxData[
      RowBox[{
        RowBox[{"EvaluateDotProducts", "[", 
          StyleBox[
            RowBox[{"e", ",", "g", ",", " ", 
              RowBox[{"metricsimplify", ":", "True"}]}],
            "MR",
            FontSlant->"Italic"], 
          StyleBox["]",
            "MR",
            FontSlant->"Italic"]}], 
        StyleBox["[",
          "MR",
          FontSlant->"Italic"], "expr", 
        StyleBox["]",
          "MR",
          FontSlant->"Italic"]}]]],
  " expands Dot products of vectors expressed in a given basis e using the \
metric tensor g. Metric simplification is performed if the default argument \
metricsimplification is True."
}], "Usage",
  CellTags->"Function?"],

Cell["\<\
Whether metric simplification is wanted depends upon whether values have been \
calculated for the metric tensor, or whether they have been calculated for \
the resulting tensors.\
\>", "MathCaption"],

Cell[TextData[{
  "See also: ",
  ButtonBox["Dot",
    ButtonData:>{"Dot"},
    ButtonStyle->"RefGuideLink"],
  ", ",
  ButtonBox["LinearBreakout",
    ButtonData:>{"LinearBreakout"},
    ButtonStyle->"AddOnsLink"],
  ", ",
  ButtonBox["BasisDotProductRules",
    ButtonData:>{"BasisDotProductRules"},
    ButtonStyle->"AddOnsLink"],
  "."
}], "MathCaption"],

Cell[CellGroupData[{

Cell["Examples", "ExampleSection"],

Cell[BoxData[
    \(Needs["\<TensorCalculus4`Tensorial`\>"]\)], "Input",
  CellLabel->"In[1]:="],

Cell["Save the settings and declare the base indices and flavors.", "Text"],

Cell[BoxData[{
    \(\(oldindices = CompleteBaseIndices;\)\), "\n", 
    \(\(oldflavors = IndexFlavors;\)\), "\n", 
    \(\(ClearIndexFlavor /@ oldflavors;\)\), "\[IndentingNewLine]", 
    \(DeclareBaseIndices[{1, 2, 3}]\), "\[IndentingNewLine]", 
    \(DeclareIndexFlavor[{red, Red}]\)}], "Input",
  CellLabel->"In[2]:="],

Cell["Define tensor shortcuts.", "Text"],

Cell[BoxData[
    \(DefineTensorShortcuts[{{e, x, y}, 1}, {g, 2}]\)], "Input",
  CellLabel->"In[7]:="],

Cell["\<\
Dot products not involving e basis vectors are left unchanged.\
\>", "Text"],

Cell[CellGroupData[{

Cell[BoxData[{
    \(u . v\), "\[IndentingNewLine]", 
    \(% // EvaluateDotProducts[e, \ g]\)}], "Input",
  CellLabel->"In[8]:="],

Cell[BoxData[
    \(u . v\)], "Output",
  CellLabel->"Out[8]="],

Cell[BoxData[
    \(u . v\)], "Output",
  CellLabel->"Out[9]="]
}, Open  ]],

Cell["Or they are partially simplified.", "Text"],

Cell[CellGroupData[{

Cell[BoxData[{
    \(u . v /. {u \[Rule] xu[i] ed[i]}\), "\[IndentingNewLine]", 
    \(% // EvaluateDotProducts[e, \ g]\)}], "Input",
  CellLabel->"In[10]:="],

Cell[BoxData[
    RowBox[{
      RowBox[{"(", 
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["e", "i", 
              TagBox[
                StyleBox["i",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]],
            Tensor[ e, {Void}, {i}],
            Editable->False], " ", 
          InterpretationBox[
            SubsuperscriptBox["x", 
              TagBox[
                StyleBox["i",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "i"],
            Tensor[ x, {i}, {Void}],
            Editable->False]}], ")"}], ".", "v"}]], "Output",
  CellLabel->"Out[10]="],

Cell[BoxData[
    RowBox[{
      RowBox[{
        InterpretationBox[
          SubsuperscriptBox["e", "i", 
            TagBox[
              StyleBox["i",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]],
          Tensor[ e, {Void}, {i}],
          Editable->False], ".", "v"}], " ", 
      InterpretationBox[
        SubsuperscriptBox["x", 
          TagBox[
            StyleBox["i",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], "i"],
        Tensor[ x, {i}, {Void}],
        Editable->False]}]], "Output",
  CellLabel->"Out[11]="]
}, Open  ]],

Cell["\<\
If both arguments of the Dot function contain the e basis vectors, then it is \
fully evaluated.\
\>", "Text"],

Cell[CellGroupData[{

Cell[BoxData[{
    \(u . v /. {u \[Rule] xu[i] ed[i], 
        v \[Rule] yu[j] ed[j]}\), "\[IndentingNewLine]", 
    \(% // EvaluateDotProducts[e, \ g]\)}], "Input",
  CellLabel->"In[12]:="],

Cell[BoxData[
    RowBox[{
      RowBox[{"(", 
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["e", "i", 
              TagBox[
                StyleBox["i",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]],
            Tensor[ e, {Void}, {i}],
            Editable->False], " ", 
          InterpretationBox[
            SubsuperscriptBox["x", 
              TagBox[
                StyleBox["i",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "i"],
            Tensor[ x, {i}, {Void}],
            Editable->False]}], ")"}], ".", 
      RowBox[{"(", 
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["e", "j", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]],
            Tensor[ e, {Void}, {j}],
            Editable->False], " ", 
          InterpretationBox[
            SubsuperscriptBox["y", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "j"],
            Tensor[ y, {j}, {Void}],
            Editable->False]}], ")"}]}]], "Output",
  CellLabel->"Out[12]="],

Cell[BoxData[
    RowBox[{
      InterpretationBox[
        SubsuperscriptBox["x", "j", 
          TagBox[
            StyleBox["j",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)]],
        Tensor[ x, {Void}, {j}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["y", 
          TagBox[
            StyleBox["j",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], "j"],
        Tensor[ y, {j}, {Void}],
        Editable->False]}]], "Output",
  CellLabel->"Out[13]="]
}, Open  ]],

Cell[TextData[{
  "Sometimes you may not want metric simplification. Then set the 3rd \
optional argument to False. For example, suppose you have calculated and \
stored values for ",
  Cell[BoxData[
      RowBox[{"gdd", "[", 
        RowBox[{"i", ",", "j"}], "]"}]]],
  " and ",
  Cell[BoxData[
      RowBox[{"xu", "[", "i", "]"}]]],
  " but not ",
  Cell[BoxData[
      RowBox[{"xd", "[", "i", "]"}]]],
  ". Then you might prefer the following form."
}], "Text"],

Cell[CellGroupData[{

Cell[BoxData[{
    \(u . v /. {u \[Rule] xu[i] ed[i], 
        v \[Rule] yu[j] ed[j]}\), "\[IndentingNewLine]", 
    \(% // EvaluateDotProducts[e, \ g, False]\)}], "Input",
  CellLabel->"In[14]:="],

Cell[BoxData[
    RowBox[{
      RowBox[{"(", 
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["e", "i", 
              TagBox[
                StyleBox["i",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]],
            Tensor[ e, {Void}, {i}],
            Editable->False], " ", 
          InterpretationBox[
            SubsuperscriptBox["x", 
              TagBox[
                StyleBox["i",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "i"],
            Tensor[ x, {i}, {Void}],
            Editable->False]}], ")"}], ".", 
      RowBox[{"(", 
        RowBox[{
          InterpretationBox[
            SubsuperscriptBox["e", "j", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)]],
            Tensor[ e, {Void}, {j}],
            Editable->False], " ", 
          InterpretationBox[
            SubsuperscriptBox["y", 
              TagBox[
                StyleBox["j",
                  ShowContents->False],
                (StyleForm[ #, ShowContents -> False]&)], "j"],
            Tensor[ y, {j}, {Void}],
            Editable->False]}], ")"}]}]], "Output",
  CellLabel->"Out[14]="],

Cell[BoxData[
    RowBox[{
      InterpretationBox[
        SubsuperscriptBox["g", \(i  j\), 
          RowBox[{
            TagBox[
              StyleBox["i",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)], 
            TagBox[
              StyleBox["j",
                ShowContents->False],
              (StyleForm[ #, ShowContents -> False]&)]}]],
        Tensor[ g, {Void, Void}, {i, j}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["x", 
          TagBox[
            StyleBox["i",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], "i"],
        Tensor[ x, {i}, {Void}],
        Editable->False], " ", 
      InterpretationBox[
        SubsuperscriptBox["y", 
          TagBox[
            StyleBox["j",
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)], "j"],
        Tensor[ y, {j}, {Void}],
        Editable->False]}]], "Output",
  CellLabel->"Out[15]="]
}, Open  ]],

Cell[TextData[{
  Cell[BoxData[
      RowBox[{"EvaluateDotProducts", Cell[""]}]]],
  "works on all dot products in an expression."
}], "Text"],

Cell[CellGroupData[{

Cell[BoxData[{
    \(ed[i] . ed[j] // ToFlavor[red]\), "\[IndentingNewLine]", 
    \(\(% // EinsteinArray[]\) // MatrixForm\), "\[IndentingNewLine]", 
    \(\(% // EvaluateDotProducts[e, g]\) // MatrixForm\)}], "Input",
  CellLabel->"In[16]:="],

Cell[BoxData[
    RowBox[{
      InterpretationBox[
        SubsuperscriptBox["e", 
          TagBox[
            StyleBox["i",
              FontColor->RGBColor[1, 0, 0]],
            (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
          TagBox[
            StyleBox[
              TagBox[
                StyleBox["i",
                  FontColor->RGBColor[1, 0, 0]],
                (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)]],
        Tensor[ e, {Void}, {
          red[ i]}],
        Editable->False], ".", 
      InterpretationBox[
        SubsuperscriptBox["e", 
          TagBox[
            StyleBox["j",
              FontColor->RGBColor[1, 0, 0]],
            (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
          TagBox[
            StyleBox[
              TagBox[
                StyleBox["j",
                  FontColor->RGBColor[1, 0, 0]],
                (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
              ShowContents->False],
            (StyleForm[ #, ShowContents -> False]&)]],
        Tensor[ e, {Void}, {
          red[ j]}],
        Editable->False]}]], "Output",
  CellLabel->"Out[16]="],

Cell[BoxData[
    TagBox[
      RowBox[{"(", "\[NoBreak]", GridBox[{
            {
              RowBox[{
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 1]}],
                  Editable->False], ".", 
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 1]}],
                  Editable->False]}], 
              RowBox[{
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 1]}],
                  Editable->False], ".", 
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 2]}],
                  Editable->False]}], 
              RowBox[{
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 1]}],
                  Editable->False], ".", 
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 3]}],
                  Editable->False]}]},
            {
              RowBox[{
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 2]}],
                  Editable->False], ".", 
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 1]}],
                  Editable->False]}], 
              RowBox[{
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 2]}],
                  Editable->False], ".", 
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 2]}],
                  Editable->False]}], 
              RowBox[{
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 2]}],
                  Editable->False], ".", 
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 3]}],
                  Editable->False]}]},
            {
              RowBox[{
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 3]}],
                  Editable->False], ".", 
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 1]}],
                  Editable->False]}], 
              RowBox[{
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 3]}],
                  Editable->False], ".", 
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 2]}],
                  Editable->False]}], 
              RowBox[{
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 3]}],
                  Editable->False], ".", 
                InterpretationBox[
                  SubsuperscriptBox["e", 
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]],
                  Tensor[ e, {Void}, {
                    red[ 3]}],
                  Editable->False]}]}
            },
          RowSpacings->1,
          ColumnSpacings->1,
          ColumnAlignments->{Left}], "\[NoBreak]", ")"}],
      Function[ BoxForm`e$, 
        MatrixForm[ BoxForm`e$]]]], "Output",
  CellLabel->"Out[17]//MatrixForm="],

Cell[BoxData[
    TagBox[
      RowBox[{"(", "\[NoBreak]", GridBox[{
            {
              InterpretationBox[
                SubsuperscriptBox["g", 
                  RowBox[{
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
                  RowBox[{
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}]],
                Tensor[ g, {Void, Void}, {
                  red[ 1], 
                  red[ 1]}],
                Editable->False], 
              InterpretationBox[
                SubsuperscriptBox["g", 
                  RowBox[{
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
                  RowBox[{
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}]],
                Tensor[ g, {Void, Void}, {
                  red[ 1], 
                  red[ 2]}],
                Editable->False], 
              InterpretationBox[
                SubsuperscriptBox["g", 
                  RowBox[{
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
                  RowBox[{
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}]],
                Tensor[ g, {Void, Void}, {
                  red[ 1], 
                  red[ 3]}],
                Editable->False]},
            {
              InterpretationBox[
                SubsuperscriptBox["g", 
                  RowBox[{
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
                  RowBox[{
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}]],
                Tensor[ g, {Void, Void}, {
                  red[ 2], 
                  red[ 1]}],
                Editable->False], 
              InterpretationBox[
                SubsuperscriptBox["g", 
                  RowBox[{
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
                  RowBox[{
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}]],
                Tensor[ g, {Void, Void}, {
                  red[ 2], 
                  red[ 2]}],
                Editable->False], 
              InterpretationBox[
                SubsuperscriptBox["g", 
                  RowBox[{
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
                  RowBox[{
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}]],
                Tensor[ g, {Void, Void}, {
                  red[ 2], 
                  red[ 3]}],
                Editable->False]},
            {
              InterpretationBox[
                SubsuperscriptBox["g", 
                  RowBox[{
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox["1",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
                  RowBox[{
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["1",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}]],
                Tensor[ g, {Void, Void}, {
                  red[ 3], 
                  red[ 1]}],
                Editable->False], 
              InterpretationBox[
                SubsuperscriptBox["g", 
                  RowBox[{
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox["2",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
                  RowBox[{
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["2",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}]],
                Tensor[ g, {Void, Void}, {
                  red[ 3], 
                  red[ 2]}],
                Editable->False], 
              InterpretationBox[
                SubsuperscriptBox["g", 
                  RowBox[{
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)], 
                    TagBox[
                      StyleBox["3",
                        FontColor->RGBColor[1, 0, 0]],
                      (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)]}], 
                  RowBox[{
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)], 
                    TagBox[
                      StyleBox[
                        TagBox[
                          StyleBox["3",
                            FontColor->RGBColor[1, 0, 0]],
                          (StyleForm[ #, FontColor -> RGBColor[ 1, 0, 0]]&)],
                        ShowContents->False],
                      (StyleForm[ #, ShowContents -> False]&)]}]],
                Tensor[ g, {Void, Void}, {
                  red[ 3], 
                  red[ 3]}],
                Editable->False]}
            },
          RowSpacings->1,
          ColumnSpacings->1,
          ColumnAlignments->{Left}], "\[NoBreak]", ")"}],
      Function[ BoxForm`e$, 
        MatrixForm[ BoxForm`e$]]]], "Output",
  CellLabel->"Out[18]//MatrixForm="]
}, Open  ]],

Cell["Restore the old values...", "Text"],

Cell[BoxData[
    \(ClearTensorShortcuts[{{e, x, y}, 1}, {g, 2}]\)], "Input",
  CellLabel->"In[19]:="],

Cell[BoxData[{
    \(DeclareBaseIndices @@ oldindices\), "\[IndentingNewLine]", 
    \(\(ClearIndexFlavor /@ IndexFlavors;\)\), "\[IndentingNewLine]", 
    \(\(DeclareIndexFlavor /@ oldflavors;\)\), "\[IndentingNewLine]", 
    \(Clear[oldindices, oldflavors]\)}], "Input",
  CellLabel->"In[20]:="]
}, Open  ]]
}, Open  ]]
},
FrontEndVersion->"5.2 for Microsoft Windows",
ScreenRectangle->{{0, 1680}, {0, 965}},
ScreenStyleEnvironment->"Working",
WindowToolbars->"EditBar",
WindowSize->{669, 474},
WindowMargins->{{1, Automatic}, {Automatic, 5}},
ShowSelection->True,
CommonDefaultFormatTypes->{"Output"->StandardForm},
StyleDefinitions -> "HelpBrowser.nb"
]

(*******************************************************************
Cached data follows.  If you edit this Notebook file directly, not
using Mathematica, you must remove the line containing CacheID at
the top of  the file.  The cache data will then be recreated when
you save this file from within Mathematica.
*******************************************************************)

(*CellTagsOutline
CellTagsIndex->{
  "Function?"->{
    Cell[1776, 53, 66, 1, 41, "ObjectName",
      CellTags->"Function?"],
    Cell[1845, 56, 750, 23, 67, "Usage",
      CellTags->"Function?"]}
  }
*)

(*CellTagsIndex
CellTagsIndex->{
  {"Function?", 41433, 1091}
  }
*)

(*NotebookFileOutline
Notebook[{

Cell[CellGroupData[{
Cell[1776, 53, 66, 1, 41, "ObjectName",
  CellTags->"Function?"],
Cell[1845, 56, 750, 23, 67, "Usage",
  CellTags->"Function?"],
Cell[2598, 81, 210, 4, 58, "MathCaption"],
Cell[2811, 87, 358, 14, 41, "MathCaption"],

Cell[CellGroupData[{
Cell[3194, 105, 34, 0, 39, "ExampleSection"],
Cell[3231, 107, 96, 2, 29, "Input"],
Cell[3330, 111, 75, 0, 25, "Text"],
Cell[3408, 113, 322, 6, 109, "Input"],
Cell[3733, 121, 40, 0, 25, "Text"],
Cell[3776, 123, 102, 2, 29, "Input"],
Cell[3881, 127, 86, 2, 25, "Text"],

Cell[CellGroupData[{
Cell[3992, 133, 130, 3, 49, "Input"],
Cell[4125, 138, 63, 2, 27, "Output"],
Cell[4191, 142, 63, 2, 27, "Output"]
}, Open  ]],
Cell[4269, 147, 49, 0, 25, "Text"],

Cell[CellGroupData[{
Cell[4343, 151, 158, 3, 49, "Input"],
Cell[4504, 156, 702, 20, 27, "Output"],
Cell[5209, 178, 625, 19, 27, "Output"]
}, Open  ]],
Cell[5849, 200, 120, 3, 25, "Text"],

Cell[CellGroupData[{
Cell[5994, 207, 190, 4, 49, "Input"],
Cell[6187, 213, 1326, 38, 30, "Output"],
Cell[7516, 253, 582, 18, 30, "Output"]
}, Open  ]],
Cell[8113, 274, 464, 14, 59, "Text"],

Cell[CellGroupData[{
Cell[8602, 292, 197, 4, 49, "Input"],
Cell[8802, 298, 1326, 38, 30, "Output"],
Cell[10131, 338, 1030, 31, 30, "Output"]
}, Open  ]],
Cell[11176, 372, 142, 4, 27, "Text"],

Cell[CellGroupData[{
Cell[11343, 380, 244, 4, 69, "Input"],
Cell[11590, 386, 1244, 36, 30, "Output"],
Cell[12837, 424, 14263, 327, 81, "Output"],
Cell[27103, 753, 13075, 300, 87, "Output"]
}, Open  ]],
Cell[40193, 1056, 41, 0, 25, "Text"],
Cell[40237, 1058, 102, 2, 29, "Input"],
Cell[40342, 1062, 297, 5, 89, "Input"]
}, Open  ]]
}, Open  ]]
}
]
*)



(*******************************************************************
End of Mathematica Notebook file.
*******************************************************************)

